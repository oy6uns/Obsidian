# OZZ: Identifying Kernel Out-of-Order Concurrency Bugs with In-Vivo Memory Access Reordering
### í•´ê²°ë°©ë²•
- In-Vivo Emulation
### What is OoO bug
- Thread-interleaving
	- ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ì½”ë“œê°€ ë™ì‘ ì•ˆí•´ì„œ 
- Out-of-order execution
	- Store-Bufferë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ê°€ ë³€ê²½ë˜ë©´
		1. invalidation messageë¥¼ CPU1ë¡œ ì „ë‹¬
		2. CPU1ì€ ë‹¤ì‹œ Acknowledgementë¥¼ CPU0ë¡œ ì „ë‹¬

## OEMU
> In-vivo out-of-order execution emulation

- Detect memory access
	- ì»´íŒŒì¼ ì‹œì— ì›ë˜ ì½”ë“œë¥¼ ì½œë°±í•¨ìˆ˜ë¡œ ë³€ê²½

## OZZ
> A kernel fuzzer utilizing OEMU

ì´ ì•Œê³ ë¦¬ì¦˜ì´ ë¶„ì„í•œ ì¬ì •ë ¬ ê°€ëŠ¥ì„±ì€ **ì ì ˆí•œ ë©”ëª¨ë¦¬ ë°°ë¦¬ì–´ë¥¼ ì‚½ì…í•´ì•¼ í•˜ëŠ” ìœ„ì¹˜ë¥¼ ê²°ì •**í•˜ëŠ” ë° í™œìš©ë©ë‹ˆë‹¤.  
ì¦‰, **ë©”ëª¨ë¦¬ ì¼ê´€ì„±(memory consistency)ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë°°ë¦¬ì–´ë¥¼ ì¶”ê°€í•  ê³³ì„ ì°¾ëŠ” ê³¼ì •**ì…ë‹ˆë‹¤.
![IMG-20250131184610.png](IMG-20250131184610.png)
## ğŸ“Œ ê²°ë¡ 

âœ… **ì´ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´, Store-Store, Load-Load, Store-Load ì¬ì •ë ¬ ê°€ëŠ¥ì„±ì´ ê°ì§€ë˜ë©´ ì ì ˆí•œ ìœ„ì¹˜ì— ë°°ë¦¬ì–´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŒ**  
âœ… **StoreëŠ” ë§ˆì§€ë§‰(`g.last`), LoadëŠ” ì²« ë²ˆì§¸(`g.first`)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°°ë¦¬ì–´ë¥¼ ë°°ì¹˜í•´ì•¼ ì˜¬ë°”ë¥¸ ì‹¤í–‰ ìˆœì„œê°€ ìœ ì§€ë¨**  
âœ… **ì´ë¥¼ í†µí•´ CPUì˜ Out-of-Order Executionê³¼ Memory Reordering ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ , ë™ê¸°í™”ë¥¼ ë³´ì¥í•  ìˆ˜ ìˆìŒ** ğŸš€


# Epoch-based Commit and Replication in Distributed OLTP Databases

### Synchronous
Replica â†’ ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
### Asynchronous
Replica â†’ Version ë™ê¸°í™” async

## Distributed Transaction Processing
- ë¶„ì‚° ì²˜ë¦¬ Databaseì—ì„œ í•˜ë‚˜ì˜ ë°ì´í„° ë² ì´ìŠ¤ì— ì ‘ê·¼ ì‹œì—ëŠ” Single Nodeì™€ ë™ì¼
- ë‘ê°œ ì´ìƒì˜ ë°ì´í„° ë² ì´ìŠ¤ ì ‘ê·¼ ì‹œì—ëŠ” ì—¬ëŸ¬ PC ì ‘ê·¼ í•„ìš”
### Epoch-based commit and replication
- ì—¬ëŸ¬ Nodeì—ì„œ ì²˜ë¦¬ëœ Transactionì„ ë¬¶ì–´ì„œ 2-phaseë¡œ ì²˜ë¦¬í•´ì¤Œìœ¼ë¡œì¨ ë” íš¨ê³¼ì ìœ¼ë¡œ commitì„ ì²˜ë¦¬í•œë‹¤. 

# Tiered Memory Management: Access Latency is the Key!
## Hot data & Cold data
### Default Dataset 
â†’ hot data
### Alternate tier
â†’ cold data

DRAMì— HOT DATAê°€ ëª°ë¦´ ì‹œì— latencyì™€ throughputì´ ì¢‹ì•„ì§ˆê±°ë¼ ìƒê°í•˜ì§€ë§Œ, ì‹¤ìƒì€ DRAMì˜ BANDWIDTHì˜ í•œê³„ë¡œ ì¸í•´ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ í•˜ë½í•œë‹¤. 

ì´ ë…¼ë¬¸ì—ì„œëŠ” HOT Pageë¥¼ ì¼ë¶€ëŸ¬ Alternate Tier Storageë¡œ ì´ë™ì‹œí‚´ìœ¼ë¡œì¨ DRAMì— ê±¸ë¦¬ëŠ” ë¶€í•˜ë¥¼ ë‚®ì¶”ê³ , íš¨ê³¼ì ìœ¼ë¡œ pageë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì œì‹œí•œë‹¤. 

# Skyloft: A General High-Efficient Scheduling Framework in User Space
## Contributions
1. user mode interruptë¥¼ í™œìš©í•˜ì—¬ ë§ˆì´í¬ë¡œì´ˆ(Âµs) ë‹¨ìœ„ì˜ ë¹ ë¥¸ ì„ ì (preemption) ì§€ì›
2. ë¦¬ëˆ…ìŠ¤ ì»¤ë„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§(CFS, RR) ëŒ€ë¹„ 100ë°° ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„ ì œê³µ
3. ghOStë³´ë‹¤ LC ì• í”Œë¦¬ì¼€ì´ì…˜ ì²˜ë¦¬ëŸ‰ 1.2ë°° ì¦ê°€
	â†’ ghOStëŠ” kernel ê¸°ë°˜ thread(kthread)ë¡œ ë™ì‘í•˜ì§€ë§Œ, skyloftëŠ” user ê¸°ë°˜ thread(uthread)ë¡œ ë™ì‘í•œë‹¤. 
![IMG-20250131190150.png](IMG-20250131190150.png)
## 



