## Branch Prediction
프로그램에서 브랜치를 jump를 많이 해야하는 경우에는
일관된 패턴을 가지는게 하드웨어 입장에서도 예측하기가 편하다. 
→ Interpreter 구현의 핵심 개념

jump를 해석하는데에 overhead가 크게 걸리기 때문에, 최대한 jump와 같이 100%가 아닌 동작들을 최소화는 것이 핵심이다. 
## Interpreter
DB의 입장에서 User가 준 Expression들을 어떻게 해석할까

점프하는걸 최대한 줄이기 위해 Dispatch table을 만든다. 
![[스크린샷 2024-12-04 오후 4.44.51.png]]
![[스크린샷 2024-12-04 오후 4.48.00.png]]
switch 문으로 되돌아가는 것이 아니라, 위와 같이 바로 다음 ptr로 jump할 수 있게 구현을 한다. 

## JIT Compilation
DBMS를 컴파일할 때, 어떤 query가 들어올지를 안다고 가정하면 
더 컴파일 최적화를 잘할 수 있을 것이다. 
- 핫 코드 경로 최적화: JIT는 실행 중 자주 호출되는 함수를 식별하고 이들만 더 강력하게 최적화할 수 있게 한다. 
- LLVM은 다양한 아키텍처와 운영체제에서 실행되는 프로그램을 지원한다. 
LLVM은 중간 표현(IR)을 통해 다양한 언어를 처리하고, JIT는 이 IR을 실시간으로 기계어로 변환하여 빠르고 최적화된 실행을 가능하게 한다. 

